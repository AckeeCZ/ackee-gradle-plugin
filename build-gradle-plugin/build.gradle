plugins {
    alias libs.plugins.kotlin
    alias libs.plugins.kotlin.dsl
    alias libs.plugins.kotlin.dokka
    alias libs.plugins.nexus.staging
    id("java-gradle-plugin")
    id("maven-publish")
}

dependencies {
    implementation(libs.android.tools.build)
    implementation(libs.kotlin.gradlePlugin)
    implementation(libs.kotlin.stdlib)
}

ext {
    PUBLISH_ARTIFACT_ID = 'build-gradle-plugin'
    POM_DESCRIPTION = 'Gradle plugin with some useful configuration shared among projects'
}

ext.libProperties = new Properties()
ext.libProperties.load(file("${rootDir}/lib.properties").newReader())

gradlePlugin {
    plugins {
        register("ackeeGradlePlugin") {
            id = 'cz.ackee.plugin'
            implementationClass = 'cz.ackee.gradle.plugin.AckeeGradlePlugin'
        }

        register("verificationsPlugin") {
            id = "cz.ackee.verifications"
            implementationClass = "cz.ackee.gradle.plugin.VerificationsPlugin"
        }

        register("variantsPlugin") {
            id = "cz.ackee.variants"
            implementationClass = "cz.ackee.gradle.plugin.VariantsPlugin"
        }

        register("deploymentPlugin") {
            id = "cz.ackee.deployment"
            implementationClass = "cz.ackee.gradle.plugin.DeploymentPlugin"
        }

        register("configuraAppPlugin") {
            id = "cz.ackee.config"
            implementationClass = "cz.ackee.gradle.plugin.ConfigureAppPlugin"
        }
    }
}


apply from: "${rootProject.projectDir}/gradle/mavencentral/publish.gradle"
